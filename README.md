# Linux TCP Chat

리눅스 환경에서 TCP 소켓을 활용하여 실시간 채팅 기능과 원격 파일 다운로드 기능을 제공하는 클라이언트-서버 모델의 통신 프로그램입니다.

## 프로젝트 개요

본 프로그램은 리눅스 환경에서 TCP 소켓을 활용하여 실시간 채팅 기능과 원격 파일 다운로드(화일전기) 기능을 통합한 클라이언트-서버 모델의 통신 프로그램입니다.

채팅 기능은 사용자 간의 양방향 실시간 메시지 송수신을 가능하게 하며, 다운로드 기능은 서버에 존재하는 텍스트 파일을 클라이언트가 요청하고 수신할 수 있도록 구현됩니다.

## 실습 배경 및 목적

이 프로그램은 소켓통신 개념이 통합 활용된 더 실용적이기 위한 실습 주제로 선택하였습니다.

파이프 단방의 채팅 프로그래밍과 소켓 단방 파일 다운로드 프로그램의 양쪽 장점으로, 두 기능을 결합하여 실용성과 학습 효과를 높이고자 했습니다.

파이프는 프로세스 간 단방향 통신을 적양하며, 소켓은 네트워크 기반 양방향 통신이 가능하여 저희 중간 학습한 통신 방식을 아우르고, 런컴 제한은 사용자가 것신을 수 있습니다.

이를 통해 실시간 메시지 전송 뿐만 아니라, 파일 요청 및 수신도 원활하게 처리할 수 있는 구조를 구현할 수 있었습니다.

## 프로그램 구조

### 전체 프로그램은 서버(server.c)와 클라이언트(client.c) 두 파일로 구성되니다.

**<서버 파일>**
- 클라이언트 연결 수락
- 클라이언트의 메시지 수신 및 출력
- 클라이언트가 "download" 명령어를 입력하면:
  - 파일명을 요청하고, 해당 파일의 존재여부 내용을 줄 단위로 전송
  - 서버 측에서 사용자 입력을 클라이언트로 전송

**<클라이언트 파일>**
- 서버에 연결 요청
- 사용자 입력을 서버로 전송
- 서버의 응답(메시지 또는 파일 데이터)을 수신하여 출력

## 코드 주요 구성 요소 설명

### <server.c>

| 함수/기능 | 설명 |
|-----------|------|
| `socket()` | TCP 통신을 위한 소켓 생성. AF_INET, SOCK_STREAM 사용으로 IPv4 기반의 신뢰할 있는 연결 설정 |
| `bind()` | 서버의 사용할 IP주소와 포트를 소켓에 할당함. INADDR_ANY를 사용하여 모든 IP에서 접속 허용하도록 설정 |
| `listen()` | 클라이언트의 접속을 기다리기 위한 대기 상태 진입. 최대 5개의 클라이언트 대기 허용 |
| `accept()` | 실제로 클라이언트의 연결을 수락하고, 클라이언트와 통신할 수 있는 전용 소켓 반환 |
| `fork()` | 서버 프로세스를 수신/송신 전용으로 분리, 자식은 클라이언트로부터 수신, 부모는 사용자 입력 송신 담당 |

### <client.c>

| 함수/기능 | 설명 |
|-----------|------|
| `gethostbyname()` | 입력된 호스트 주소(ex 127.0.0.1)를 IP 주소 구조체로 변환. 서버 접속을 위한 준비 |
| `"download"` 처리 | 클라이언트가 "download"를 입력하면, 서버로 파일명을 받고 히면서 파일의 내용을 입력받아 출력 |
| `write()/fgets()` | 파일 내용을 줄 단위로 읽고, write()를 통해 클라이언트에서 전달 |

## 핵심 기능 및 기술

| 채팅 기능 | `fork()`를 이용하여 송신/수신 프로세스를 분리하고, 사용자 간 실시간 채팅 기능 |
|-----------|---------|
| 파일 다운로드 기능 | 클라이언트가 "download" 명령어를 입력하면, 서버로부터 파일을 요청 후 해당 파일 내용 수신 |
| 네트워크 프로그래밍 | TCP 소켓을 이용한 클라이언트-서버 구조 구성(AF_INET, SOCK_STREAM 사용) |
| 입출력 처리 | `read()`, `write()`, `fgets()`, `writeLine()` 등을 활용한 라인 단위 통신 구현 |
| 멀티 프로세싱 | `fork()`를 활용하여 서버와 클라이언트 모두 송수신 별도 처리 |

## 프로그램 사용 방법

### <예시>

**서버 실행:**
```bash
gcc -o server server.c
./server 12345
```
(서버는 포트 번호를 인자로 받아 실행됨)

**클라이언트 실행:**
```bash
gcc -o client client.c
./client 127.0.0.1 12345
```
(클라이언트는 서버의 IP주소와 포트 번호를 인자로 받아 실행됨. 같은 컴퓨터에서 테스트하는 경우 127.0.0.1 사용하고(로컬 호스트) 의 부팅 IP를 사용)

## 학습 성과

단방향 파이프와 양방 소켓을 통한 복합적 통신 실습을 통해 클라이언트-서버 모델에 대한 이해를 심화할 수 있었고, 소켓 프로그래밍의 실무 구현 사례를 체험할 수 있었습니다. 또한 각 기능 구현을 넘어 더 다음과 같은 기능을 통해 사용자 인터페이스의 향상과 유용성을 높일 수 있었습니다.

## 결론 및 향후 발전 방향

이번 프로젝트를 통해 리눅스 기반 네트워크 통신과 소켓 프로그래밍의 기초부터 응용까지 경험할 수 있었으며, 

또한 다음과 같은 기능 향상을 생각해볼 수 있었습니다:

- 다중 클라이언트 지원(select, epoll 등 - 추가로 인터넷으로 찾아볼 내용)
- 이진 파일 다운로드 지원
- 파일 업로드 기능 추가
- 인증 및 보안 기능 추가(저만라 등)

---

**작성자:** minsk0429  
**프로젝트:** 소켓 프로그래밍 제작 - 채팅 및 파일 다운로드 통합 프로그램
